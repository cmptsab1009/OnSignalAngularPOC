<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>OneSignalNotification</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
  <script>
    window.OneSignal = window.OneSignal || [];
    // OneSignal.push(function() {
    //   debugger;
    //   console.log("inside push");
    //   OneSignal.init({
    //     appId: "0a749872-a713-4734-affa-8c7aef18e28b",

    //   });
      
    // });
    console.log("push initialize");
    OneSignal.push(["init", {
      appId: "0a749872-a713-4734-affa-8c7aef18e28b",
      autoRegister: false,
      allowLocalhostAsSecureOrigin: true,
      notifyButton: {
        enable: false
      }
    }]);
    console.log("push initialized");

    OneSignal.push(function () {
      console.log('Register For Push');
      OneSignal.push(["registerForPushNotifications"])
      
    });
    //ExternalUserId( - logged in user id - Type - GUID
    OneSignal.push(function () {
     
      OneSignal.setExternalUserId("3bb306e5-2aae-4769-adda-9badf26afead","F4CE1FBFFFD02B1426E5F75EA74307387F4E0978A9A37E4844733D80B20FE941");
      console.log('Registered For external user id in Onesignal as "3bb306e5-2aae-4769-adda-9badf26afead"');
      OneSignal.push(["registerForPushNotifications"])
     
    });

    OneSignal.push(function () {
      // Occurs when the user's subscription changes to a new value.
      OneSignal.getUserId().then(function (userId) {
    //console.log("User ID is", userId);
  });
  OneSignal.push(function() {
  OneSignal.on('notificationDisplay', function(event) {
    console.warn('OneSignal notification displayed:', event);
    console.log(event.heading);
    console.log(event.content);
  });
  
  //This event can be listened to via the `on()` or `once()` listener
});
      OneSignal.on('subscriptionChange', function (isSubscribed) {
        console.log("The user's subscription state is now:", isSubscribed);
        OneSignal.getUserId().then(function (userId) {

          console.log("User ID is", userId);
         // localStorage.setItem("UserId",userId);
        });
      });
    });
  </script>

</head>
<body>
  <app-root></app-root>
</body>
</html>
